"use strict";(self["webpackChunkwebsite"]=self["webpackChunkwebsite"]||[]).push([[80],{34350:function(t,e,a){a.d(e,{Z:function(){return n}});var s=a(55978),i=a(73325);const o=(0,i.Z)(s.Z);var n=o.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...s.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var e;t?this.calculateInputHeight():null==(e=this.$refs.input)||e.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"},genInput(){const t=s.Z.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){s.Z.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},80994:function(t,e,a){a.d(e,{Dx:function(){return i},YF:function(){return o},_C:function(){return r},dm:function(){return d},hb:function(){return c},jL:function(){return l},nC:function(){return n},yC:function(){return u}});var s=a(76051);const i=async function(t){const e=await s.ZP.post("/users/0/locations",t);return e.data},o=async function(t,e){const a=await s.ZP.put(`users/0/locations/${t}`,e);return a.data},n=async function(){const t=await s.ZP.get("users/0/locations");return t.data},r=async function(t){const e=await s.ZP.get(`locations/${t}`);return e.data},c=async function(t,e){const a=new FormData;for(let s of e)a.append("image[]",s);const i=await s.ZP.post(`users/0/locations/${t}/images`,a);return i.data},l=async function(t,e){const a=await s.ZP["delete"](`users/0/locations/${t}/images`,{image:e});return a.data},u=async function(t){const e=await s.ZP.get("/locations/search",t);return e.data},d=async function(t){const e=await s.ZP.get(`users/${t}/locations`);return e.data}},61747:function(t,e,a){a.d(e,{Io:function(){return r},MW:function(){return n},bG:function(){return c},gK:function(){return o},vW:function(){return i}});var s=a(76051);const i=async function(){const t=await s.ZP.get("/messages");return t.data},o=async function(t,e,a,i){const o=await s.ZP.post("/messages",{message:t,location_id:e,booking_inputs:a,has_flexible_dates:i});return o.data},n=async function(t,e){const a=await s.ZP.post("/messages/compose-from-booking",{message:e,booking_id:t});return a.data},r=async function(t){const e=await s.ZP.get(`/messages/${t}`);return e.data},c=async function(t,e){const a=await s.ZP.post(`messages/${t}`,{message:e});return a.data}},1091:function(t,e,a){a.d(e,{Z:function(){return k}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",[a("span",{staticClass:"headline font-weight-bold"},[t._v(" AED "+t._s(t.getRangeFromName(t.bookingDetails.selectedCrewRange?t.bookingDetails.selectedCrewRange:"1 - 5").prices[t.bookingDetails.selectedActivity?t.bookingDetails.selectedActivity:"EVENT"])+" ")]),t._v("/hr ")]),a("v-col",{staticClass:"text-right"},[t._v(" "+t._s(t.location.minimum_rental_hours)+" hr. minimum ")])],1),t._l(t.bookingDetails.selectedDates,(function(e,s){return a("div",{key:s+e.day},[a("v-row",{staticClass:"mt-3 pb-0"},[a("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"4"}},[a("vc-date-picker",{ref:"day-picker-"+s,refInFor:!0,attrs:{mode:"date","min-date":new Date,"disabled-dates":t.blockedDays,"available-dates":t.availableDays,dense:"",popover:{visibility:"none"}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.inputValue,i=e.inputEvents,o=e.togglePopover;return[a("v-card-actions",{staticClass:"my-0 py-0"},[a("v-text-field",t._g({staticClass:"cursor-pointer",attrs:{placeholder:"Date",value:t.getMediumDate(s),"hide-details":!0,readonly:"",dense:""},on:{click:o}},i))],1)]}}],null,!0),model:{value:e.day,callback:function(a){t.$set(e,"day",a)},expression:"bookingDate.day"}})],1),a("v-col",{staticClass:"ma-0 pa-0"},[a("v-card-actions",{staticClass:"my-0 py-0"},[a("v-select",{attrs:{items:t.startDateMenu,placeholder:"start date","append-icon":"mdi-chevron-right","hide-details":!0,dense:""},on:{change:function(t){e.end=null}},model:{value:e.start,callback:function(a){t.$set(e,"start",a)},expression:"bookingDate.start"}}),a("v-select",{attrs:{items:t.endDateMenu(e.start),placeholder:"End date","append-icon":t.bookingDetails.selectedDates.length>1?"mdi-close":"","hide-details":!0,disabled:!e.start&&!1,dense:""},on:{"click:append":function(a){t.bookingDetails.selectedDates.splice(t.bookingDetails.selectedDates.indexOf(e),1)}},model:{value:e.end,callback:function(a){t.$set(e,"end",a)},expression:"bookingDate.end"}})],1)],1)],1),t.isNextDay(e.end)?a("v-row",{staticClass:"mt-0 pt-0"},[a("v-col",[a("div",{staticClass:"caption orange--text"},[t._v("Booking ends the next day")])])],1):t._e()],1)})),a("v-row",{staticClass:"mt-3 pt-0"},[a("v-col",{staticClass:"ma-0 pa-0"},[a("v-card-actions",[a("p",{staticClass:"green--text add-day-button",attrs:{text:""},on:{click:t.addDay}},[t._v("Add Day")]),a("v-spacer"),a("p",{staticClass:"grey--text"},[t._v("Total hours: "+t._s(t.totalHours))])],1)],1)],1),t.totalHours>0&&t.location.minimum_rental_hours>t.totalHours?a("v-row",{staticClass:"mt-0 pt-0"},[a("v-col",{staticClass:"my-1 py-0"},[a("v-alert",{staticClass:"my-0",attrs:{type:"warning",color:"orange",text:"",border:"left",prominent:"",dense:"",value:!0}},[a("p",[t._v(t._s(t.location.minimum_rental_hours)+" hr. minimum")]),t._v(" You can't submit a request that is less than the hourly minimum. ")])],1)],1):t._e(),a("v-row",{staticClass:"mt-2 pt-0"},[a("v-col",{staticClass:"mb-2 pt-0"},[a("v-select",{attrs:{items:t.location.pricing.ranges,placeholder:"Cast & crew","item-value":"name",dense:"","hide-details":""},scopedSlots:t._u([{key:"selection",fn:function(e){return[t._v(" "+t._s("PRODUCTION"==t.bookingDetails.selectedActivity?"Cast & crew":"Attendees")+" : "+t._s(e.item.name)+" people ")]}},{key:"item",fn:function(e){return[t._v(" "+t._s(e.item.name)+" people "),a("v-spacer"),t._v(" AED "+t._s(e.item.prices[t.bookingDetails.selectedActivity?t.bookingDetails.selectedActivity:"EVENT"])+" /hr ")]}}]),model:{value:t.bookingDetails.selectedCrewRange,callback:function(e){t.$set(t.bookingDetails,"selectedCrewRange",e)},expression:"bookingDetails.selectedCrewRange"}})],1)],1),a("v-row",{staticClass:"mt-0 pt-0"},[a("v-col",{staticClass:"mb-2 pt-0"},[a("v-select",{attrs:{items:t.locationActivities,placeholder:"Activity Type","item-value":"id",dense:"","hide-details":""},scopedSlots:t._u([{key:"selection",fn:function(e){return[t._v(" Type: "+t._s(e.item.name)+" ")]}},{key:"item",fn:function(e){return[a("div",[t._v(" "+t._s(e.item.name)+" "),a("p",{staticClass:"caption"},[t._v(" "+t._s(e.item.description)+" ")])])]}}]),model:{value:t.bookingDetails.selectedActivity,callback:function(e){t.$set(t.bookingDetails,"selectedActivity",e)},expression:"bookingDetails.selectedActivity"}})],1)],1)],2)},i=[],o=a(33161),n=a.n(o),r={props:{},data(){return{}},created(){},computed:{bookingDetails:{get(){return this.$store.getters["Bookings/currentBooking"].bookingDetails},set(t){JSON.stringify(this.$store.getters["Bookings/currentBooking"].bookingDetails)!=JSON.stringify(t)&&this.$store.commit("Bookings/setCurrentBooking",{location:this.location,bookingDetails:t})}},location:{get(){return this.$store.getters["Bookings/currentBooking"].location},set(t){this.$store.commit("Bookings/setCurrentBooking",{location:t,bookingDetails:this.bookingDetails})}},crewSelectMenu(){let t=[];for(let e of this.location.pricing.ranges)t.push(e);return t},locationActivities(){const t=[{id:"PRODUCTION",name:this.$t("models.location.activities.PRODUCTION.name"),description:this.$t("models.location.activities.PRODUCTION.description")},{id:"EVENT",name:this.$t("models.location.activities.EVENT.name"),description:this.$t("models.location.activities.EVENT.description")},{id:"MEETING",name:this.$t("models.location.activities.MEETING.name"),description:this.$t("models.location.activities.MEETING.description")}];return t},startDateMenu(){const t=[];for(let e=6;e<24;e++){let a=(new(n().Date)).reset();a.addHours(e),t.push(a.format("{hh}:{mm} %P").raw)}return t},blockedDays(){let t=[];this.location.availability_calendar.blockedWeekDays.length>0&&t.push({weekdays:this.location.availability_calendar.blockedWeekDays});for(let e in this.location.availability_calendar.forcedBlockedDays)t.push(this.location.availability_calendar.forcedBlockedDays[e]);return[...t]},availableDays(){const t=[];for(let e in this.location.availability_calendar.forcedAvailableDays)new(n().Date)(this.location.availability_calendar.forcedAvailableDays[e]).isPast()||t.push(this.location.availability_calendar.forcedAvailableDays[e]);return[...t]},totalHours(){let t=0;for(let e of this.bookingDetails.selectedDates)t+=this.diffInHours(e.start,e.end);return t}},methods:{endDateMenu(t){if(!t)return[];const e=[{header:"End Time",divider:!0}],a=parseInt(new(n().Date)(t).getHours().raw);for(let s=7;s<24;s++){let t=(new(n().Date)).reset();t.addHours(s),a<s&&e.push(t.format("{hh}:{mm} %P").raw)}e.push("11:59 pm"),e.push({header:"Next Day",divider:!0});for(let s=1;s<7;s++){let t=(new(n().Date)).reset();t.addHours(s),e.push(t.format("{hh}:{mm} %P").raw)}return e},isNextDay(t){if(!t)return!1;switch(t.toString().toLowerCase()){case"01:00 am":case"02:00 am":case"03:00 am":case"04:00 am":case"05:00 am":case"06:00 am":return!0;default:return!1}},diffInHours(t,e){if(!t||!e)return 0;const a=new(n().Date)(t),s=new(n().Date)(e);return this.isNextDay(e)&&s.addDays(1),Math.ceil(Math.abs(s.raw-a.raw)/36e5)},getRangeFromName(t){if(!t||!this.location||!this.location.pricing||!this.location.pricing.ranges)return{prices:[{}]};t=t.trim();for(let e of this.location.pricing.ranges)if(e.name==t)return e;return!1},getShortDate(t){if(t)return new(n().Date)(t).format("%d/%m/%Y")},getMediumDate(t){if(t)return new(n().Date)(t).medium()},isDayAvailable(){return!0},addDay(){const t=Object.assign({},this.bookingDetails),e=t.selectedDates[t.selectedDates.length-1];if(!e.day)return void this.$refs["day-picker-"+(t.selectedDates.length-1)][0].togglePopover();const a=new(n().Date)(e.day.toString()).addDays(1).medium().raw;t.selectedDates.push({day:a,start:e.start,end:e.end}),this.bookingDetails=Object.assign({},t)}},watch:{}},c=r,l=a(1001),u=a(43453),d=a.n(u),m=a(35098),g=a(37118),h=a(82102),p=a(62877),v=a(10344),f=a(99762),y=a(55978),D=(0,l.Z)(c,s,i,!1,null,"60f3541a",null),k=D.exports;d()(D,{VAlert:m.Z,VCardActions:g.h7,VCol:h.Z,VRow:p.Z,VSelect:v.Z,VSpacer:f.Z,VTextField:y.Z})},44005:function(t,e,a){a.d(e,{Z:function(){return y}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.bookingDetails.selectedCrewRange&&t.totalHours>0&&t.bookingDetails.selectedActivity&&t.totalHours>0&&t.location.minimum_rental_hours<=t.totalHours?a("v-row",{staticClass:"mt-0 pt-0"},[a("v-col",[a("div",{staticClass:"subtitle-2 font-weight-bold mx-2"},[t._v("Price")]),a("v-card-actions",{staticClass:"py-0 my-0 mb-1"},[t._v(" AED "+t._s(t.getRangeFromName(t.bookingDetails.selectedCrewRange?t.bookingDetails.selectedCrewRange:"1 - 5").prices[t.bookingDetails.selectedActivity])+" × "+t._s(t.totalHours)+" hours "),a("v-spacer"),t._v(" "+t._s("AED"+t.rentPrice.toLocaleString())+" ")],1),t._l(t.systemFees,(function(e,s){return a("v-card-actions",{key:"system_fee_"+s,staticClass:"py-0 my-0 mb-1"},[t._v(" "+t._s(e.name)+" "),a("v-spacer"),t._v(" "+t._s("AED"+e.amount.toLocaleString())+" ")],1)})),t._l(t.bookingDetails.addOns,(function(e,s){return a("v-card-actions",{key:"add_ons_fee_"+s,staticClass:"py-0 my-0 mb-1"},[t._v(" "+t._s(e.name)+" "),a("v-spacer"),t._v(" "+t._s("AED"+e.amount.toLocaleString())+" ")],1)})),a("v-divider",{staticClass:"my-2",staticStyle:{"background-color":"green"}}),a("v-card-actions",{staticClass:"py-0 my-0"},[a("span",{staticClass:"title"},[t._v(" Total ")]),a("v-spacer"),t._v(" "+t._s("AED"+t.totalPrice.toLocaleString())+" ")],1)],2)],1):t._e()],1)},i=[],o=a(33161),n=a.n(o),r={props:{},created(){},methods:{diffInHours(t,e){if(!t||!e)return 0;const a=new(n().Date)(t),s=new(n().Date)(e);return this.isNextDay(e)&&s.addDays(1),Math.ceil(Math.abs(s.raw-a.raw)/36e5)},getRangeFromName(t){t=t.trim();for(let e of this.location.pricing.ranges)if(e.name==t)return e;return!1},isNextDay(t){if(!t)return!1;switch(t.toString().toLowerCase()){case"01:00 am":case"02:00 am":case"03:00 am":case"04:00 am":case"05:00 am":case"06:00 am":return!0;default:return!1}}},computed:{bookingDetails:{get(){return this.$store.getters["Bookings/currentBooking"].bookingDetails},set(t){this.$store.commit("Bookings/setCurrentBooking",{location:this.location,bookingDetails:t})}},location:{get(){return this.$store.getters["Bookings/currentBooking"].location},set(t){this.$store.commit("Bookings/setCurrentBooking",{location:t,bookingDetails:this.bookingDetails})}},rentPrice(){return this.getRangeFromName(this.bookingDetails.selectedCrewRange?this.bookingDetails.selectedCrewRange:"1 - 5").prices[this.bookingDetails.selectedActivity]*this.totalHours},totalPrice(){let t=0;return t+=this.rentPrice,t+=this.totalSystemFees,t+=this.totalAddOnsFees,t},totalSystemFees(){let t=0;for(let e of this.systemFees)t+=e.amount;return t},totalAddOnsFees(){let t=0;for(let e of this.bookingDetails.addOns)t+=e.amount;return t},totalHours(){let t=0;for(let e of this.bookingDetails.selectedDates)t+=this.diffInHours(e.start,e.end);return t},systemFees(){const t=[{id:"PROCESSING_FEES",name:"Processing Fees",amount:250,currency_code:"AED",type:"fixed"}];return t}}},c=r,l=a(1001),u=a(43453),d=a.n(u),m=a(37118),g=a(82102),h=a(11418),p=a(62877),v=a(99762),f=(0,l.Z)(c,s,i,!1,null,null,null),y=f.exports;d()(f,{VCardActions:m.h7,VCol:g.Z,VDivider:h.Z,VRow:p.Z,VSpacer:v.Z})}}]);
//# sourceMappingURL=80.6d715447.js.map